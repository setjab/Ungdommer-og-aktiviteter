<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ungdom under 30 år Aktiviteter</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <h1 style="text-align: center;">Ungdom under 30 år Aktiviteter</h1>
  <div style="margin-bottom: 20px; text-align: center;">
    <label for="aktivitet-filter">Velg aktivitet:</label>
    <select id="aktivitet-filter" multiple>
      <!-- Alternativer vil bli lagt til dynamisk -->
    </select>
  </div>
  <div id="graf" style="width: 100%; height: 600px;"></div>

  <script>
    // Data fra tabellen
    const data = [
      { aktivitet: "Enkeltplass AMO", tall: 19 },
      { aktivitet: "Enkeltplass Fag- og yrkesopplæring VGS og høyere yrkesfaglig utdanning", tall: 21 },
      { aktivitet: "Forsøk AMO enkeltplass", tall: 16 },
      { aktivitet: "Forsøk fag- og yrkesopplæring enkeltplass", tall: 16 },
      { aktivitet: "Gruppe AMO", tall: 18 },
      { aktivitet: "Høyere utdanning", tall: 21 },
      { aktivitet: "Individuell jobbstøtte (IPS)", tall: 17 },
      { aktivitet: "Jobbklubb", tall: 16 },
      { aktivitet: "Midlertidig lønnstilskudd", tall: 19 },
      { aktivitet: "Oppfølging", tall: 20 },
      { aktivitet: "Varig lønnstilskudd", tall: 17 },
      { aktivitet: "Varig tilrettelagt arbeid i ordinær virksomhet", tall: 4 },
      { aktivitet: "Varig tilrettelagt arbeid i skjermet virksomhet", tall: 16 },
      { aktivitet: "Arbeid med støtte", tall: 19 },
      { aktivitet: "Arbeidsforberedende trening (AFT)", tall: 42 },
      { aktivitet: "Arbeidsmarkedskurs (AMO)", tall: 16 },
      { aktivitet: "Arbeidsrettet rehabilitering (dag)", tall: 16 },
      { aktivitet: "Arbeidstrening", tall: 21 },
      { aktivitet: "Avklaring", tall: 20 },
      { aktivitet: "Digitalt oppfølgingstiltak for arbeidsledige (jobbklubb)", tall: 17 },
    ];

    // Legg til alternativer i dropdown-menyen
    const select = document.getElementById("aktivitet-filter");
    data.forEach(item => {
      const option = document.createElement("option");
      option.value = item.aktivitet;
      option.textContent = item.aktivitet;
      select.appendChild(option);
    });

    // Funksjon for å tegne grafen
    function drawGraph(filteredData) {
      const aktiviteter = filteredData.map(item => item.aktivitet);
      const tall = filteredData.map(item => item.tall);

      const trace = {
        x: tall,
        y: aktiviteter,
        type: "bar",
        orientation: "h",
      };

      const layout = {
        title: "Aktiviteter for ungdom under 30 år",
        xaxis: { title: "Antall" },
        yaxis: { title: "Aktiviteter", automargin: true },
      };

      Plotly.newPlot("graf", [trace], layout);
    }

    // Initial visning
    drawGraph(data);

    // Oppdater grafen når filteret endres
    select.addEventListener("change", () => {
      const selectedOptions = Array.from(select.selectedOptions).map(option => option.value);
      const filteredData = selectedOptions.length
        ? data.filter(item => selectedOptions.includes(item.aktivitet))
        : data;
      drawGraph(filteredData);
    });
  </script>
</body>
</html>
